<div class="wrapper container">
  <div class="card b text-white">
    <div class="card-body bg-cover clearfix" style="background-image: url(assets/img/profile-bg.jpg);">
      <div class="media mt-0 align-items-center">
        <img class="mr-3 img-thumbnail rounded-circle" src="assets/img/user/coop.jpg" alt="Image" />
        <div class="media-body">
          <div class="d-flex">
            <div>
              <h4 class="m-0">Name: {{accountdetails?.cardname}}</h4>
              <p>Address: {{accountdetails?.address}}</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <h2>Send Credit Card Demand Letter</h2>
  <form #sendLetterForm="ngForm" class="form-horizontal" autocomplete="off">
    <div id="accordion">
      <div class="card">
        <div class="card-header">
          <a class="card-link" data-toggle="collapse" href="#collapseOne">
            Customer Details
          </a>
        </div>
        <div id="collapseOne" class="collapse show" data-parent="#accordion">
          <div class="card-body">
            <div class="card card-default">
              <div class="card-body">
                <form class="form-horizontal" autocomplete="off">
                    <div class="form-group row">
                        <label class="col-xl-4 col-form-label">Demand</label>
                        <div class="col-xl-8">
                            <select class="form-control" name="demand" id="demand" [(ngModel)]="model.demand"
                            #demand="ngModel" [ngClass]="{ 'is-invalid': demand.invalid }" required>
                            <option *ngFor="let demand of itemsDemands">{{demand}}</option>
                            </select>
                        </div>
                      </div>
                  <div class="form-group row">
                    <label class="col-xl-4 col-form-label">Cardacct</label>
                    <div class="col-xl-8">
                      <input class="form-control" type="text" name="accnumber" id="accnumber" [(ngModel)]="model.accnumber"
                        #accnumber="ngModel" [ngClass]="{ 'is-invalid': accnumber.invalid }" required />
                    </div>
                  </div>
                  <div class="form-group row">
                    <label class="col-xl-4 col-form-label">Cardnumber</label>
                    <div class="col-xl-8">
                      <input class="form-control" type="text" name="custnumber" id="custnumber" [(ngModel)]="model.custnumber"
                        #custnumber="ngModel" [ngClass]="{ 'is-invalid': custnumber.invalid }" required />
                    </div>
                  </div>
                  <div class="form-group row">
                    <label class="col-xl-4 col-form-label">address</label>
                    <div class="col-xl-8">
                      <input class="form-control" type="text" name="addressline1" id="addressline1" [(ngModel)]="model.addressline1"
                        #addressline1="ngModel" [ngClass]="{ 'is-invalid': addressline1.invalid }" required />
                    </div>
                  </div>
                  <div class="form-group row">
                    <label class="col-xl-4 col-form-label">postcode</label>
                    <div class="col-xl-8">
                      <input class="form-control" type="text" name="postcode" id="postcode" [(ngModel)]="model.postcode"
                        #postcode="ngModel" [ngClass]="{ 'is-invalid': postcode.invalid }" required />
                    </div>
                  </div>
                  <div class="form-group row">
                    <label class="col-xl-4 col-form-label">email address</label>
                    <div class="col-xl-8">
                      <input class="form-control" type="email" name="emailaddress" id="emailaddress" [(ngModel)]="model.emailaddress"
                        #emailaddress="ngModel" [ngClass]="{ 'is-invalid': emailaddress.invalid }" required email />
                    </div>
                  </div>
                  <div class="form-group row">
                    <label class="col-xl-4 col-form-label">cellnumber</label>
                    <div class="col-xl-8">
                      <input class="form-control" type="text" name="celnumber" id="celnumber" [(ngModel)]="model.celnumber"
                        #celnumber="ngModel" [ngClass]="{ 'is-invalid': celnumber.invalid }" required />
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="card">
        <div class="card-header">
          <a class="collapsed card-link" data-toggle="collapse" href="#collapseTwo">
            Guarantors <span class="badge badge-primary">{{guarantors?.length}}</span>
          </a>
        </div>
        <div id="collapseTwo" class="collapse" data-parent="#accordion">
          <div class="card-body">
            <!-- START table-responsive-->
            <div class="table-responsive">
              <table class="table table-striped table-bordered table-hover">
                <thead>
                  <tr>
                    <th scope="col">#</th>
                    <th scope="col">Gurarantor Name</th>
                    <th scope="col">Address</th>
                    <th scope="col">Postal Code</th>
                    <th scope="col">Tenumber</th>
                    <th scope="col">Email</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let g of guarantors">
                    <th scope="row">{{g.idnumber}}</th>
                    <td>{{g.guarantorname}}</td>
                    <td>{{g.address}}</td>
                    <td>{{g.postalcode}}</td>
                    <td>{{g.telnumber}}</td>
                    <td>{{g.email}}</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <!-- END table-responsive-->
          </div>
        </div>
      </div>
      <div class="card">
        <div class="card-header">
          <a class="collapsed card-link" data-toggle="collapse" href="#collapseThree">
            History Demand Letters <span class="badge badge-primary">{{demands?.length}}</span>
          </a>
        </div>
        <div id="collapseThree" class="collapse" data-parent="#accordion">
          <div class="card-body">
            <table class="wd-wide">
              <tbody>
                <tr *ngFor="let d of demands">
                  <td class="wd-xs">
                    <div class="px-2">
                        <button class="btn btn-outline-success btn-sm" (click)="downloadFile(d.filepath)">
                            <i class="fa fa-download"></i> 
                          </button>
                    </div>
                  </td>
                  <td>
                    <div class="px-2">
                      <h4 class="mb-2">{{d.demand}}</h4>
                      <small class="text-muted">{{d.owner}}</small>
                    </div>
                  </td>
                  <td class="wd-sm  d-none d-lg-table-cell">
                    <div class="px-2">
                      <p class="m-0">Date sent</p>
                      <small class="text-muted">{{d.datesent | date}}</small>
                    </div>
                  </td>
                  <td class="wd-xs d-none d-lg-table-cell">
                    <div class="px-2">
                      <p class="m-0 text-muted">
                        <em class="icon-people mr-2 fa-lg"></em>0</p>
                    </div>
                  </td>
                  <td class="wd-xs d-none d-lg-table-cell">
                    <div class="px-2">
                      <p class="m-0 text-muted">
                        <em class="icon-envelop mr-2 fa-lg"></em><button class="btn btn-link" (click)="resend(d.filepath)">resend on email</button></p>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
    <fieldset>
      <div class="form-group row">
        <label class="col-md-0 col-form-label"></label>
        <div class="col-md-12">
          <label class="checkbox c-checkbox c-checkbox-rounded">
            <input id="roundedcheckbox10" type="checkbox" [disabled]="!emailaddress.valid" name="sendemail" id="sendemail"
              [(ngModel)]="model.sendemail" #sendemail="ngModel" />
            <span class="fa fa-check"></span>Send to email</label>
          <label class="checkbox c-checkbox c-checkbox-rounded">
            <input id="roundedcheckbox20" type="checkbox" [disabled]="!addressline1.valid" name="sendpostal" id="sendpostal"
              [(ngModel)]="model.sendpostal" #sendpostal="ngModel" />
            <span class="fa fa-check"></span>Send to post address</label>
          <label class="checkbox c-checkbox c-checkbox-rounded">
            <input id="roundedcheckbox20" type="checkbox" name="sendphysical" id="sendphysical" [(ngModel)]="model.sendphysical"
              #sendphysical="ngModel" />
            <span class="fa fa-check"></span>Physical delivery</label>
        </div>
      </div>
    </fieldset>
    <div class="form-group row">
      <label class="col-xl-4 col-form-label"></label>
      <div class="col-xl-8">
        <button class="btn btn-sm btn-secondary" type="button" (click)="generate()">Generate
          & Send</button>
      </div>
    </div>
  </form>

  <div class="p-3 text-center">
    <span>&copy;</span>
    <span>{{ settings.getAppSetting('year') }}</span>
    <span class="mx-2">-</span>
    <span>{{ settings.getAppSetting('name') }}</span>
    <br />
    <!--<span>{{ settings.getAppSetting('description') }}</span>-->
  </div>

</div>
