<div class="content-heading">
  <div>
    Letters
    <small>Demand letters automation</small>
  </div>
</div>
<div class="container-fluid">
  <ngx-spinner bdColor="rgba(51,51,51,0.8)" color="#fff" size="medium" type="ball-spin-fade">
    <p style="font-size: 20px; color: white">Processing ...</p>
  </ngx-spinner>
  <div id="accordion">
    <div class="card">
      <div class="card-header">
        <a class="card-link" data-toggle="collapse" href="#collapseOne">
          Demand Letter Automation
        </a>
      </div>
      <div class="collapse show" data-parent="#accordion" id="collapseOne">
        <div class="card-body">
          <div class="row">
            <div class="col-xl-6">
              <div class="card card-primary">
                <div class="card-body">
                  <form #settingsForm="ngForm" (ngSubmit)="addNew(settingsForm)" *ngIf="new" class="form-horizontal">
                    <fieldset>
                      <div class="form-group row mb">
                        <div class="col-md-12">
                          <label class="mt">Demand Letter</label>
                          <ngx-select #letterid="ngModel" (data)="refreshValue($event)" [(ngModel)]="model.letterid"
                                      [allowClear]="true" [disabled]="disabled" [items]="itemsDemands" [ngClass]="{ 'is-invalid': letterid.invalid }"
                                      id="letterid" name="letterid"
                                      placeholder="No demand letter selected" required>
                          </ngx-select>

                          <label class="mt">Select Memo group(s) to send to</label>
                          <ngx-select #memogroup="ngModel" (data)="value" (data)="refreshValue($event)" (selected)="selected($event)" [(ngModel)]="model.memogroup"
                                      [disabled]="disabled" [items]="items" [multiple]="true"
                                      id="memogroup" name="memogroup"
                                      placeholder="No memo selected">
                          </ngx-select>
                        </div>
                      </div>
                    </fieldset>
                    <p class="my-2"></p>
                    <div class="form-group">
                      <p>Day in arrears when the letter will be sent (Between 0 and 120)</p>
                      <label for="daysinarr"></label><input #daysinarr="ngModel" [(ngModel)]="model.daysinarr" [ngClass]="{ 'is-invalid': daysinarr.invalid }"
                                                            [range]="[1, 120]" class="form-control"
                                                            id="daysinarr"
                                                            name="daysinarr"
                                                            required
                                                            type="number"/>
                      <p *ngIf="daysinarr.errors?.range">Range accepted is 1 - 120</p>
                      <!--<div *ngIf="daysinarr.errors.min">Minimum required is 0</div>
                            <div *ngIf="daysinarr.errors.max">Maximum required is 120</div>-->
                    </div>

                    <!--<pre>{{model | json}}</pre>-->

                    <!--

                    -->
                    <p class="lead mt-3"></p>
                    <div>
                      <div class="clearfix">
                        <div class="float-left">
                          <button [disabled]="!settingsForm.valid || !settingsForm.dirty"
                                  class="btn btn-outline-primary" type="submit">
                            <em class="fa fa-check fa-fw"></em>Add New
                          </button>
                        </div>
                      </div>
                    </div>
                  </form>
                  <form #editForm="ngForm" (ngSubmit)="editSubmit(editForm)" *ngIf="!new" class="form-horizontal">
                    <p class="lead mt-3"></p>
                    <div class="form-group">
                      <p>Demand Letter</p>
                      <label for="letterid"></label><input #letterid="ngModel" [(ngModel)]="model.letterid" [disabled]="true"
                                                           class="form-control"
                                                           id="letterid" name="letterid" required/>
                    </div>
                    <p class="my-2"></p>
                    <div class="form-group">
                      <p>Day in arrears when the letter will be sent (Between 0 and 120)</p>
                      <label for="daysinarr"></label><input #daysinarr="ngModel" [(ngModel)]="model.daysinarr" [ngClass]="{ 'is-invalid': daysinarr.invalid }"
                                                            class="form-control" id="daysinarr"
                                                            name="daysinarr"
                                                            required
                                                            type="number"/>
                      <!--<div *ngIf="daysinarr.errors.min">Minimum required is 0</div>
                              <div *ngIf="daysinarr.errors.max">Maximum required is 120</div>-->
                    </div>
                    <p class="my-2"></p>
                    <div class="form-group">
                      <p>Send to [MemoGroups]</p>
                      <label for="memogroup"></label><input #memogroup="ngModel" [(ngModel)]="model.memogroup" [disabled]="true"
                                                            class="form-control"
                                                            id="memogroup" name="memogroup"/>
                    </div>
                    <fieldset>
                      <div class="form-group row">
                        <label class="col-md-2 col-form-label">Suspend</label>
                        <p></p>
                        <div class="col-md-10">
                          <label class="checkbox c-checkbox">
                            <input #active="ngModel" [(ngModel)]="model.active" [checked]="model.active" id="active"
                                   name="active" type="checkbox"/>
                            <span class="fa fa-check"></span> Active</label>
                        </div>
                      </div>
                    </fieldset>

                    <div class="float-left">
                      <button class="btn btn-outline-primary" type="submit" type="submit">
                        <em class="fa fa-pencil fa-fw"></em>Update
                      </button>
                    </div>
                    <div class="float-left">
                      <button (click)="shownew()" class="btn btn-outline-warning">
                        <em class="fa fa-check fa-fw"></em>Cancel
                      </button>
                    </div>

                    <!--<div class="float-right">
                      <button class="btn btn-danger" type="button" (click)="delete()">
                        <em class="fas fa-trash-alt fa-fw"></em>Delete</button>
                    </div>-->

                  </form>
                </div>
              </div>
            </div>
            <div class="col-xl-6">
              <div class="col-xl-12">
                <h4 class="page-header">automated Demand letters
                  <small>search, sorting, filter ...</small>
                </h4>
                <div class="row">
                  <div class="col-xl-4 col-lg-6">
                    <label>
                      <input (keyup)="onQuickFilterChanged($event)" class="mb form-control" placeholder="Filter..."
                             type="text"/>
                    </label>
                  </div>
                </div>
                <ag-grid-angular #agGrid (gridReady)="gridReady($event)" (rowClicked)='onRowClicked($event)' [gridOptions]="gridOptions"
                                 [rowData]="rowData1"
                                 class="ag-angle"
                                 style="width: 100%; height: 400px">
                </ag-grid-angular>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
